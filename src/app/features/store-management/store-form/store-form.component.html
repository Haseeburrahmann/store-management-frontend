<!-- src/app/features/store-management/store-form/store-form.component.html -->
<div class="store-form-container">
    <mat-card>
      <mat-card-header>
        <mat-card-title>{{ isEditMode ? 'Edit' : 'Create' }} Store</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <form [formGroup]="storeForm" (ngSubmit)="onSubmit()">
          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Store Name</mat-label>
              <input matInput formControlName="name" placeholder="Enter store name">
              <mat-error *ngIf="storeForm.get('name')?.hasError('required')">
                Store name is required
              </mat-error>
            </mat-form-field>
          </div>
  
          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Address</mat-label>
              <input matInput formControlName="address" placeholder="Enter store address">
              <mat-error *ngIf="storeForm.get('address')?.hasError('required')">
                Address is required
              </mat-error>
            </mat-form-field>
          </div>
  
          <div class="form-row-multi">
            <mat-form-field appearance="outline">
              <mat-label>City</mat-label>
              <input matInput formControlName="city" placeholder="Enter city">
              <mat-error *ngIf="storeForm.get('city')?.hasError('required')">
                City is required
              </mat-error>
            </mat-form-field>
  
            <mat-form-field appearance="outline">
              <mat-label>State</mat-label>
              <input matInput formControlName="state" placeholder="Enter state">
              <mat-error *ngIf="storeForm.get('state')?.hasError('required')">
                State is required
              </mat-error>
            </mat-form-field>
  
            <mat-form-field appearance="outline">
              <mat-label>ZIP Code</mat-label>
              <input matInput formControlName="zip_code" placeholder="Enter ZIP code">
              <mat-error *ngIf="storeForm.get('zip_code')?.hasError('required')">
                ZIP code is required
              </mat-error>
            </mat-form-field>
          </div>
  
          <div class="form-row-multi">
            <mat-form-field appearance="outline">
              <mat-label>Phone</mat-label>
              <input matInput formControlName="phone" placeholder="Enter phone number">
              <mat-error *ngIf="storeForm.get('phone')?.hasError('required')">
                Phone is required
              </mat-error>
            </mat-form-field>
  
            <mat-form-field appearance="outline">
              <mat-label>Email</mat-label>
              <input matInput formControlName="email" placeholder="Enter email address">
              <mat-error *ngIf="storeForm.get('email')?.hasError('email')">
                Please enter a valid email address
              </mat-error>
            </mat-form-field>
          </div>
  
          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Store Manager</mat-label>
                <mat-select formControlName="manager_id">
                  <mat-option [value]="null">None</mat-option>
                  <mat-option *ngFor="let manager of managers" [value]="manager._id">
                    {{manager.full_name}}
                  </mat-option>
                </mat-select>
                <mat-spinner *ngIf="isLoadingManagers" diameter="20" matSuffix></mat-spinner>
              </mat-form-field>
          </div>
  
          <div class="form-row">
            <mat-checkbox formControlName="is_active">Active</mat-checkbox>
          </div>
  
          <div class="form-actions">
            <button type="button" mat-button [routerLink]="['/stores']">
              Cancel
            </button>
            <button type="submit" mat-raised-button color="primary" [disabled]="storeForm.invalid || isLoading">
              <mat-spinner *ngIf="isLoading" diameter="20" class="spinner-button"></mat-spinner>
              {{ isEditMode ? 'Update' : 'Create' }}
            </button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  </div>